{"version":3,"sources":["services/person.js","components/PersonDetails.js","components/Filter.js","components/PersonForm.js","App.js","index.js"],"names":["baseUrl","getAll","a","request","axios","get","then","data","create","newObject","post","update","id","put","deletePerson","delete","PersonDetails","person","removePerson","name","number","onClick","Filter","onChange","value","PersonForm","props","onSubmit","valueName","onChangeName","type","pattern","valueNumber","onChangeNumber","Message","message","className","ErrorMessages","err","App","useState","persons","setPersons","newName","setNewName","newNumber","setNewNumber","filter","setFilter","setMessage","errormessage","setErrorMessage","useEffect","console","log","noteService","response","display","filtered","toLowerCase","includes","window","confirm","e","target","event","preventDefault","find","personfind","nameObject","map","catch","setTimeout","alert","concat","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.39c518e2.chunk.js","sourcesContent":["import axios from 'axios'\r\nconst baseUrl = 'http://localhost:3001/persons'\r\n\r\nconst getAll = async () => {\r\n    const request = axios.get(baseUrl)\r\n    return request.then(request => request.data)\r\n}\r\n\r\nconst create = async (newObject) => {\r\n    const request = axios.post(baseUrl, newObject)\r\n    return request.then(request => request.data)\r\n    \r\n}\r\n\r\nconst update = async (id, newObject) => {\r\n    const request = axios.put(`${baseUrl}/${id}`, newObject)\r\n    return request.then(request => request.data)\r\n}\r\n\r\nconst deletePerson = async (id) => {\r\n    const request = axios.delete(`${baseUrl}/${id}`)\r\n    return request.then(request => request.data)\r\n}\r\n\r\nexport default {\r\n    getAll,\r\n    create,\r\n    update,\r\n    deletePerson\r\n}","import React from 'react'\r\n\r\nconst PersonDetails=({person,removePerson})=>{\r\n\r\n    return(\r\n           <div>\r\n            <table>\r\n                <tbody>\r\n                   <tr>\r\n                      <td>{person.name} </td>\r\n                      <td>{person.number}</td>\r\n                      <td><button onClick={()=>removePerson(person.id,person.name)}>Delete</button></td>\r\n                   </tr>\r\n               </tbody>\r\n           </table>\r\n           </div>\r\n\r\n    )\r\n\r\n}\r\n\r\nexport default PersonDetails","import React from 'react'\r\n\r\nconst Filter = ({ onChange, value }) => {\r\n    return (\r\n        <div>\r\n            filter shown with <input onChange={onChange} value={value}></input>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Filter","import React from 'react'\r\n\r\nconst PersonForm=(props)=>{\r\n\r\n    return(\r\n      <>\r\n     <form onSubmit={props.onSubmit}>\r\n      <h2>add a new</h2>\r\n        <div>\r\n          name: &nbsp; &nbsp; &nbsp;<input value={props.valueName} onChange={props.onChangeName}/>\r\n        </div><br/>\r\n        <div>number:&nbsp;&nbsp;&nbsp;<input type='tel' pattern=\"[0-9\\-]+\" value={props.valueNumber} onChange={props.onChangeNumber}/></div>\r\n        <div><br />\r\n          <button type=\"submit\">add</button>\r\n        </div><br/>\r\n      </form>\r\n\r\n          </>\r\n     \r\n\r\n    )\r\n\r\n}\r\n\r\nexport default PersonForm","import React,{useState,useEffect} from \"react\";\nimport noteService from './services/person'\nimport PersonDetails from './components/PersonDetails'\nimport Filter from './components/Filter'\nimport PersonForm from './components/PersonForm'\nimport './App.css'\nconst Message = ({message}) => {\n  if(message === null)\n  {\n      return null\n  }\n  \n      return (\n          <div className=\"success\">\n              {message}\n          </div>\n      )\n  }\n\n  const ErrorMessages = ({err}) => {\n\n    if(err === null){\n      return null\n  }\n  \n        return (\n\n              <div className=\"error\">\n                    {err}\n                </div>\n        )\n    }\n\n\nconst App = () => {\n  const [ persons, setPersons] = useState([]) \n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const [filter, setFilter] = useState('')\n  const [message, setMessage] = useState(null)\n  const [errormessage, setErrorMessage] = useState(null)\n\n\n  useEffect(() => {\n    console.log('effect')\n    \n      noteService.getAll()\n      .then(response => {\n        console.log('promise fulfilled')\n        setPersons(response)\n        console.log(response)\n      })\n  }, [])\n\nconst addDetails=(event)=>{\n  event.preventDefault()\n  if(persons.find(persons=>persons.name===newName)){\n    if(window.confirm(`${newName} is already added to the phonebook,replace the old number with a new one?`)){\n      const personfind = persons.find((person) => person.name.toLowerCase().includes(newName.toLowerCase()))\n      const nameObject={\n        ...personfind,\n        number:newNumber,\n      }\n      noteService.update(personfind.id,nameObject)\n      .then(()=>{\n      setPersons(persons.map(person=>personfind.id!==person.id?person:nameObject))})\n      .catch((err) => {\n        setErrorMessage( `${personfind.name} has already been removed from server`)\n        setTimeout(() => setErrorMessage(null), 5000)\n        setPersons( persons.filter((person) => person.id !== personfind.id));\n\n      });\n      setNewName('')\n      setNewNumber('')\n\n     \n\n    }\n  }\n  else if(persons.find(persons=>persons.number===newNumber)){\n    alert(newNumber+\" is already added to the phonebook\")\n  }\n  else{\n  const nameObject={\n    name:newName,\n    number:newNumber,\n  }\n   noteService.create(nameObject)\n   .then(response=>{\n  setPersons(persons.concat(response))\n  setNewName('')\n  setNewNumber('')\n  setMessage(`${newName} was added!`);\n  setTimeout(() => setMessage(null), 9000);\n   })\n}\n}\nconst heChange=(event)=>{\n\n  setNewName(event.target.value)\n}\nconst heChangeNumber=(event)=>{\n\n  setNewNumber(event.target.value)\n}\nconst handleFilterChange = (e) => {\n  setFilter(e.target.value)\n\n}\nconst display=persons.filter((filtered)=>{\n    if(filter==='')\n    {\n      return persons\n    }\n    else if(filtered.name.toLowerCase().includes(filter.toLowerCase()))  {\n        return filtered\n    }\n    else{\n      return null;\n    }\n  })\n  const removePerson = (id, name) => {\n    if ( window.confirm(`Delete ${name} ?`)) {\n      noteService\n        .deletePerson(id)\n        .then(() => setPersons(persons.filter((person) => person.id !== id)))\n   \n    } else {\n      return;\n    }\n  };\n\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Message message={message}/>\n      <ErrorMessages err={errormessage}/>\n      <Filter onChange={handleFilterChange}/>\n      <PersonForm onSubmit={addDetails} valueName={newName} onChangeName={heChange} valueNumber={newNumber} onChangeNumber={heChangeNumber}/>\n      <h2>Numbers</h2>\n       {display.map(person=>\n        <PersonDetails key={person.id} person={person}  removePerson={removePerson}/>\n        )}\n    </div>\n  )\n\n\n}\nexport default App","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\n\r\nReactDOM.render(\r\n    <App/>,\r\n  document.getElementById('root')\r\n);"],"sourceRoot":""}